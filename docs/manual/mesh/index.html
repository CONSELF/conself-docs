<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.21" />
    <meta name="description" content="CONSELF Docs">
<meta name="author" content="Alberto Palazzin">

    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />

    
    <title>Mesh</title>
    <link href="http://docs.conself.com/css/nucleus.css" rel="stylesheet">
    <link href="http://docs.conself.com/css/font-awesome.min.css" rel="stylesheet">
    <link href="http://docs.conself.com/css/hybrid.css" rel="stylesheet">
    <link href="http://docs.conself.com/css/featherlight.min.css" rel="stylesheet">
    <link href="http://docs.conself.com/css/perfect-scrollbar.min.css" rel="stylesheet">
    <link href="http://docs.conself.com/css/horsey.css" rel="stylesheet">
    <link href="http://docs.conself.com/css/theme.css" rel="stylesheet">
    <link href="http://docs.conself.com/css/hugo-theme.css" rel="stylesheet">
    <script src="http://docs.conself.com/js/jquery-2.x.min.js"></script>
    <style type="text/css">:root #header + #content > #left > #rlblock_left
    {display:none !important;}</style>
    <link href="/css/conself.css" rel="stylesheet">
  </head>
  <body class="" data-url="/manual/mesh/">
    
    <nav id="sidebar">
  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://conself.com">
	<img src="/images/LOGOConself.png" alt="CONSELF Logo">
</a>

    </div>
    
</div>


  <div class="highlightable">
    <ul class="topics">
      
        
        
          
          
            
          
        
          
          
            
          
        
          
          
            
          
        
          
          
            
          
        
        
        
          
        
          
        
          
        
          
        
      
      
      
      

      
      
      
        
          
        
      
      
      

      <li class="dd-item  parent" data-nav-id="/manual/">
        <a href="/manual/">
          <span>
            
              <b>1. </b>
            
             Manual
            
           </span>
        </a>
        
        <ul>
          
            <li class="dd-item " data-nav-id="/manual/account/">
              <a href="/manual/account/">
                <span>Account     </i></span>
              </a>
            </li>
          
            <li class="dd-item " data-nav-id="/manual/simulation-process/">
              <a href="/manual/simulation-process/">
                <span>Simulation Process     </i></span>
              </a>
            </li>
          
            <li class="dd-item " data-nav-id="/manual/geometry/">
              <a href="/manual/geometry/">
                <span>Geometry     </i></span>
              </a>
            </li>
          
            <li class="dd-item active" data-nav-id="/manual/mesh/">
              <a href="/manual/mesh/">
                <span>Mesh     </i></span>
              </a>
            </li>
          
            <li class="dd-item " data-nav-id="/manual/cfd/">
              <a href="/manual/cfd/">
                <span>CFD     </i></span>
              </a>
            </li>
          
            <li class="dd-item " data-nav-id="/manual/mech/">
              <a href="/manual/mech/">
                <span>MECH     </i></span>
              </a>
            </li>
          
            <li class="dd-item " data-nav-id="/manual/results/">
              <a href="/manual/results/">
                <span>Results     </i></span>
              </a>
            </li>
          
        </ul>
        
      </li>
      
      
      

      
      
      
        
          
        
      
      
      

      <li class="dd-item  " data-nav-id="/hints/">
        <a href="/hints/">
          <span>
            
              <b>2. </b>
            
             Hints
            
           </span>
        </a>
        
        <ul>
          
            <li class="dd-item " data-nav-id="/hints/input-cad-files/">
              <a href="/hints/input-cad-files/">
                <span>Input CAD Files     </i></span>
              </a>
            </li>
          
            <li class="dd-item " data-nav-id="/hints/boundary-conditions/">
              <a href="/hints/boundary-conditions/">
                <span>CFD boundary Conditions     </i></span>
              </a>
            </li>
          
            <li class="dd-item " data-nav-id="/hints/common-errors/">
              <a href="/hints/common-errors/">
                <span>Common Errors     </i></span>
              </a>
            </li>
          
        </ul>
        
      </li>
      
      
      

      
      
      
        
          
        
      
      
      

      <li class="dd-item  " data-nav-id="/validation/">
        <a href="/validation/">
          <span>
            
              <b>3. </b>
            
             Validation &amp; tutorials
            
           </span>
        </a>
        
        <ul>
          
            <li class="dd-item " data-nav-id="/validation/ahmed/">
              <a href="/validation/ahmed/">
                <span>AHMED     </i></span>
              </a>
            </li>
          
            <li class="dd-item " data-nav-id="/validation/car-park-ventilation/">
              <a href="/validation/car-park-ventilation/">
                <span>Car park ventilation     </i></span>
              </a>
            </li>
          
            <li class="dd-item " data-nav-id="/validation/lid-driven-cavity/">
              <a href="/validation/lid-driven-cavity/">
                <span>Lid Driven Cavity     </i></span>
              </a>
            </li>
          
        </ul>
        
      </li>
      
      
      

      
      
      
        
          
        
      
      
      

      <li class="dd-item  " data-nav-id="/contributing/">
        <a href="/contributing/">
          <span>
            
              <b>4. </b>
            
             Contributing
            
           </span>
        </a>
        
        <ul>
          
            <li class="dd-item " data-nav-id="/contributing/downloads/">
              <a href="/contributing/downloads/">
                <span>Downloads     </i></span>
              </a>
            </li>
          
            <li class="dd-item " data-nav-id="/contributing/external-link/">
              <a href="/contributing/external-link/">
                <span>External Link     </i></span>
              </a>
            </li>
          
        </ul>
        
      </li>
      
      
    </ul>
    <hr>
     
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fa fa-heart"></i></a> from <a href="http://getgrav.org">Grav</a> and <a href="http://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>

        <section id="body">
        <div id="overlay"></div>

        <div class="padding highlightable sticky-parent">
            
            <div class="sticky-spacer">
              <div id="top-bar">
              
                
                
                
              <div id="top-github-link">
                  <a class="github-link" href="https://github.com/CONSELF/conself-docs/tree/master/content/manual/mesh.md" target="blank">
                    <i class="fa fa-code-fork"></i>
                    Edit this page
                  </a>
              </div>
                
              
              <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                  <span id="sidebar-toggle-span">
                      <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                        <i class="fa fa-bars"></i>
                      </a>
                  </span>
                
                <span id="toc-menu"><a href=""><i class="fa fa-list-alt"></i></a></span>
                
                
                  
                  
                  
                    
                    
                <a href="/manual/" itemprop="url"><span itemprop="title">Manual</span></a> <i class="fa fa-angle-right"></i>
                    
                  
                
                <span itemprop="title"> Mesh</span>
              </div>
              
                  <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#volume-mesh">VOLUME MESH</a></li>
<li><a href="#surface-refinement">SURFACE REFINEMENT</a></li>
<li><a href="#boundary-layer">BOUNDARY LAYER</a></li>
<li><a href="#mesh-quality">MESH QUALITY</a></li>
<li><a href="#practice">PRACTICE</a>
<ul>
<li>
<ul>
<li><a href="#to-know-even-more">TO KNOW EVEN MORE</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

              
            </div>

            </div>
            
              <div id="body-inner">
                
                <h1>Mesh</h1>
                



<p>Mesh is the STEP required in order to define the mesh.</p>

<h2 id="volume-mesh">VOLUME MESH</h2>

<p>In this section the user is asked to define the mesh algorithm and the basic mesh feature.</p>

<ul>
<li><p><em>Meshing algorithm</em>: drop down list from which the user has to select the meshing algorithm (see pictures below).</p>

<ul>
<li><em>Hexahedral</em>: by using this algorithm, a fully cartesian grid is obtained. Depending on the mesh dimension specifications on the boundaries, local grid refinements are applied to meet the resolution constraints. In case the boundary layer is active, a highly stretched prismatic mesh is added to the tetrahedral one in the vicinity of the boundary surfaces.</li>
<li><em>Tetrahedral</em>: by using this algorithm, a fully tetrahedral mesh is obtained. In case the boundary layer is active, a highly stretched prismatic mesh is added to the tetrahedral one in the vicinity of the boundary surfaces.</li>
</ul></li>

<li><p><em>Mesh smoothing</em>: uniformity level of the volume mesh assigned as a percentage.</p></li>
</ul>

<p>
<figure class="figure-30">
    
        <img src="/images/HEXAMesh.png" alt="Hexahedral mesh" />
    
    
    <figcaption>
        <h4>Hexahedral mesh</h4>
        
    </figcaption>
    
</figure>


<figure class="figure-30">
    
        <img src="/images/Dolfin_mesh.png" alt="Tetrahedral mesh" />
    
    
    <figcaption>
        <h4>Tetrahedral mesh</h4>
        
    </figcaption>
    
</figure>
</p>

<h2 id="surface-refinement">SURFACE REFINEMENT</h2>

<p>In this section it is possible to define mesh local refinement for each of the considered surfaces.</p>

<ul>
<li><p><em>Boundary treatment</em>: selection of the boundary using an accordion menu.</p></li>

<li><p><em>Mesh uniformity</em>: percentage that defines how rapidly the basic elements dimension grows.</p></li>

<li><p><em>Maximum mesh size</em>: it defines the local mesh refinement (i.e. the element size) on the selected surface.</p></li>
</ul>

<div class="notices info" ><p>In order to choose correctly the <em>Maximum mesh size</em> it is important to run a convergence analysis.</p>
</div>


<h2 id="boundary-layer">BOUNDARY LAYER</h2>

<p>In this section it is possible to activate the boundary treatment (i.e. boundary layer) for wall resolution in CFD simulations. As showed in the following image, the boundary layer is a zone where the surface mesh is extruded in direction normal to the external surface. The user can here customize this type of extrusion by defining the number of cells to be extruded and the dimensions of the extrusion zone. This operation is fundamental when dealing with a CFD simulation since the quality of the results depends on the wall distance of the first fluid cell.</p>


<figure class="figure-30">
    
        <img src="/images/TetraBL.png" alt="Representation of the two parameters used to define the boundary treatment" />
    
    
</figure>


<ul>
<li><em>Boundary treatment</em>: selection of the boundary using an accordion menu.</li>
<li><em>Wall layers number</em>: number of wall layers to be extruded from the surface</li>
<li><em>First wall cell height</em>: value that ranges from $1\cdot e^{-6}\ [m]$ to $1\cdot e^6\ [m]$ and defines the dimension of the nearest cell to the wall in the normal direction.</li>
</ul>

<div class="notices info" ><p>First wall cell height and y+ are mutually influenced. Remember to decrease the cell height if y+ is above 300 for k-epsilon or 1 for other turbulence models. Several <a href="https://www.cfd-online.com/Tools/yplus.php">y+ estimator</a> are available online to give guidelines about the wall cell dimension.</p>
</div>


<p>After having completed this setup, the user can finalize the step by clicking on the <em>Submit</em> button. This will start the <strong>Mesh</strong> step application that will show up in the <em>Case in progress</em> section of the main <em>Simulation</em> page.</p>

<h2 id="mesh-quality">MESH QUALITY</h2>

<p>Once the mesh step is completed, using the graphic interface it is possible to view the obtained grid. Mesh quality is reported with a certain number of variables which highlights problematic cells. The most common variables are:</p>

<ul>
<li>skewFaces</li>
</ul>


<figure class="figure-50">
    
        <img src="/images/Skewness.png" alt="Skew face representation" />
    
    
</figure>


<ul>
<li>nonOrthoFaces</li>
</ul>


<figure class="figure-50">
    
        <img src="/images/Orthogonality.png" alt="Non orthogonal cells" />
    
    
</figure>


<ul>
<li>highAspectRatioCells</li>
</ul>


<figure class="figure-50">
    
        <img src="/images/aspectRatio.png" alt="High aspect ration visualization" />
    
    
</figure>


<p>CONSELF automatically impose some fixed thresholds for all these problems. When this threshold is passed the cell is highlighted as low quality. The highlight mechanism is rather simple: all these variables are assigned a 0 value where no problem is present, 1 where the problem is present. In order to view the mesh zone where quality test fails it is necessary to filter and extract the problematic zone as described in this tutorial.</p>

<ul>
<li>Open the menu clicking on the <strong>Pipeline</strong> button</li>
<li>select the solution file <em>system.foam</em></li>
<li>apply the <strong>Threshold</strong> filter under the menu identified by a <em>+</em> sign</li>
<li>in the filter properties choose the quality variable (i.e. <em>skewFaces</em>) as parameter</li>
<li>set the minimum and maximum threshold values as 0.5 and 1 and click on the small tick in the upper part of the filter property</li>
<li>in the pipeline menu activate the visualization of the entire file <em>system.foam</em> and set <em>Opacity</em> value in its <em>Representation</em> property equal to 0.3</li>
</ul>

<div class="video-player">
	<iframe class="youtube-player" type="text/html" width="640" height="360" src="http://www.youtube.com/embed/MnKwiDkBJBU" allowfullscreen frameborder="0">
	</iframe>
</div>

<h2 id="practice">PRACTICE</h2>

<h4 id="to-know-even-more">TO KNOW EVEN MORE</h4>

<p>CONSELF is constantly producing more and more tutorials and guidelines to users so they can get benefits out of CFD/FEM simulations. In particular, referring to meshing, you can find a certain number of posts by visiting <a href="https://conself.com/blog/category/meshing/">this page</a>.</p>


      
      
      </div>
    </div>

    
    
    
      
        
      
        
      
        
      
        
      
      
    
    
    
      
        
      
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
      
        
      
      
        
      
        
      
        
      
    
      
        
      
      
        
      
        
      
        
      
    
      
        
      
      
        
      
        
      
    
    

    <div id="navigation">
        
        
        
          
        
          
        
          
        
          
        
          
            
              
                <a class="nav nav-prev" href="/manual/geometry/"> <i class="fa fa-chevron-left"></i></a>
              
            
            
              
                <a class="nav nav-next" href="/manual/cfd/" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
              
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        
        
        
    </div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="http://docs.conself.com/js/clipboard.min.js"></script>
    <script src="http://docs.conself.com/js/perfect-scrollbar.min.js"></script>
    <script src="http://docs.conself.com/js/perfect-scrollbar.jquery.min.js"></script>
    <script src="http://docs.conself.com/js/jquery.sticky-kit.min.js"></script>
    <script src="http://docs.conself.com/js/featherlight.min.js"></script>
    <script src="http://docs.conself.com/js/html5shiv-printshiv.min.js"></script>
    <script src="http://docs.conself.com/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="http://docs.conself.com/js/modernizr.custom.71422.js"></script>
    <script src="http://docs.conself.com/js/learn.js"></script>
    <script src="http://docs.conself.com/js/hugo-learn.js"></script>
    
<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>



<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-51513359-1', 'auto');
ga('send', 'pageview');
</script>

  </body>
</html>

